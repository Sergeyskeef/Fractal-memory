# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –¥–≤–∞ —É—Ä–æ–≤–Ω—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **Backend —Ç–µ—Å—Ç—ã** (Python/pytest) - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç API –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
2. **Frontend —Ç–µ—Å—Ç—ã** (TypeScript/Vitest + Playwright) - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç UI –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

---

## Backend —Ç–µ—Å—Ç—ã

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd /root/Mark_project/fractal_memory
make test
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ API —Ç–µ—Å—Ç—ã
pytest tests/test_api.py -v

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø–∞–º—è—Ç–∏
pytest tests/test_memory_unit.py -v

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src --cov-report=html
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

- `test_api.py` - E2E —Ç–µ—Å—Ç—ã FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- `test_agent.py` - –¢–µ—Å—Ç—ã FractalAgent
- `test_memory_unit.py` - Unit —Ç–µ—Å—Ç—ã –ø–∞–º—è—Ç–∏
- `test_graphiti_store.py` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã GraphitiStore
- `test_redis_store.py` - –¢–µ—Å—Ç—ã Redis —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- `test_reasoning.py` - –¢–µ—Å—Ç—ã ReasoningBank
- `test_retrieval.py` - –¢–µ—Å—Ç—ã HybridRetriever

### –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ hotfix –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
- `test_memory_levels_user_isolation` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ L2/L3 —É–∑–ª—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ user_tag
- `test_memory_stats_user_isolation` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## Frontend —Ç–µ—Å—Ç—ã

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd fractal-memory-interface
npm install
```

### Unit —Ç–µ—Å—Ç—ã (Vitest)

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –í watch —Ä–µ–∂–∏–º–µ
npm test -- --watch

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm test -- --coverage

# UI —Ä–µ–∂–∏–º
npm test -- --ui
```

### E2E —Ç–µ—Å—Ç—ã (Playwright)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
npx playwright install

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö E2E —Ç–µ—Å—Ç–æ–≤
npx playwright test

# –í UI —Ä–µ–∂–∏–º–µ
npx playwright test --ui

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
npx playwright test chat.spec.ts
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```
fractal-memory-interface/tests/
‚îú‚îÄ‚îÄ setup.ts                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ App.test.tsx                # –¢–µ—Å—Ç—ã –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ api.test.ts             # –¢–µ—Å—Ç—ã API –∫–ª–∏–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ InputArea.test.tsx      # –¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–≤–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ MessageBubble.test.tsx  # –¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ StatsPanel.test.tsx     # –¢–µ—Å—Ç—ã –ø–∞–Ω–µ–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îî‚îÄ‚îÄ e2e/
    ‚îú‚îÄ‚îÄ chat.spec.ts            # E2E —Ç–µ—Å—Ç—ã —á–∞—Ç–∞
    ‚îî‚îÄ‚îÄ memory.spec.ts          # E2E —Ç–µ—Å—Ç—ã –ø–∞–º—è—Ç–∏
```

---

## –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### Backend

‚úÖ **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
- `/chat` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `/memory/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏
- `/memory/{level}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —É–∑–ª–æ–≤ –ø–∞–º—è—Ç–∏
- `/memory/consolidate` - –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è
- `/memory/remember` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ user_tag –≤ L2/L3 –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π

‚úÖ **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**:
- FractalMemory (L0/L1/L2/L3)
- ReasoningBank (—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –æ–ø—ã—Ç)
- HybridRetriever (–ø–æ–∏—Å–∫)
- RedisMemoryStore (L0/L1)

### Frontend

‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- App - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- InputArea - –≤–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π
- MessageBubble - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- StatsPanel - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏

‚úÖ **API –∫–ª–∏–µ–Ω—Ç**:
- –í—Å–µ –º–µ—Ç–æ–¥—ã API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

‚úÖ **E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–∑–ª–æ–≤ –ø–∞–º—è—Ç–∏
- –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è

---

## –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### Backend

**–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 53.40% (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 50%)

**–¶–µ–ª—å**: >60%

### Frontend

**–¶–µ–ª—å**: >70%

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è:
```bash
cd fractal-memory-interface
npm test -- --coverage
```

---

## –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ backend —Ç–µ—Å—Ç—ã**:
   ```bash
   make test
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç**:
   ```bash
   pytest tests/test_api.py::test_memory_levels_user_isolation -v
   pytest tests/test_api.py::test_memory_stats_user_isolation -v
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å frontend —Ç–µ—Å—Ç—ã** (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥):
   ```bash
   cd fractal-memory-interface
   npm test
   npx playwright test
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å E2E**:
   ```bash
   python3 scripts/test_full_cycle.py
   ```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ coverage –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∑–∫–∏–º (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- E2E —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (`npm run preview`)
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ Neo4j/Redis (–ø–æ–º–µ—á–µ–Ω—ã `@pytest.mark.integration`)

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Backend

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `tests/test_<module>.py`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏–∑ `conftest.py`
3. –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@pytest.mark.integration`

### Frontend

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `tests/components/<Component>.test.tsx` –∏–ª–∏ `tests/e2e/<feature>.spec.ts`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React Testing Library –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Playwright –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤

---

## CI/CD

–¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:
- Push –≤ main –≤–µ—Ç–∫—É
- Pull Request
- –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (nightly builds)

–ü—Ä–æ–≤–µ—Ä–∫–∞: `.github/workflows/ci.yml`
